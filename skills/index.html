<!DOCTYPE html>
<html lang="en">
<head>
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2550226982131064"
     crossorigin="anonymous"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Pinehub</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
<div id="roster">

  <a><div class="char active"><img style="width: 250px;" src="images/html.png"><h2 style="font-size: 50px;">Html</h2></div></a>
  <div class="char"><img style="width: 300px;" src="images/python.png"><h2 style="font-size: 50px;">Python</h2></div>
  <div class="char"><img style="width: 300px;" src="images/javascript.png"><h2 style="font-size: 50px;">Javascript</h2></div>
  <div class="char"><img style="width: 300px;" src="images/css.png"><h2 style="font-size: 50px;">CSS</h2></div>
  <div class="char"><div class="gridmaker"><img style="width: 120px;" src="images/debian.png"><img style="width: 120px;" src="images/fedora.png"><img style="width: 120px;" src="images/arch.webp"><img style="width: 120px;" src="images/ubuntu.png"></div>
<h2 style="font-size: 50px;">Linux</h2>
</div>
  <!--left thing-->
  <a><div class="charr active"><div class="circle" id="progress-circle"><h1 class="textcir" style="font-size: 50px;" id="percentage">90%</h1></div> </div></a>
  <div class="charr"><div class="circle" id="progress-circle"><h1 class="textcir" style="font-size: 50px;" id="percentage">100%</h1></div></div>
  <div class="charr"><div class="circle" id="progress-circle"><h1 class="textcir" style="font-size: 50px;" id="percentage">51%</h1></div></div>
  <div class="charr"><div class="circle" id="progress-circle"><h1 class="textcir" style="font-size: 50px;" id="percentage">41%</h1></div></div>
  
<div class="charr"><div class="gridmaker"><div class="circle" id="progress-circle" style="width: 150px; height: 150px;"><h1 class="textcir" style="font-size: 25px;" id="percentage">90%</h1></div>
<div class="circle" id="progress-circle" style="width: 150px; height: 150px;"><h1 class="textcir" style="font-size: 25px;" id="percentage">72%</h1></div>
<div class="circle" id="progress-circle" style="width: 150px; height: 150px;"><h1 class="textcir" style="font-size: 25px;" id="percentage">60%</h1></div>
<div class="circle" id="progress-circle" style="width: 150px; height: 150px;"><h1 class="textcir" style="font-size: 25px;" id="percentage">95%</h1></div></div></div>
</div>

<script src="script.js">
  const chars = [...document.querySelectorAll('.charr')];
const charrs = [...document.querySelectorAll('.char')];
let index = 0;
let indexs = 0;
let busy = false;
let startX = 0;
let endX = 0;
const threshold = 50; // Minimum distance for a swipe

function updatePositions() {
  chars.forEach((el, i) => {
    //console.log(index);
    el.classList.remove('active', 'exit-up', 'enter-up');
    if (i === index) {
      el.classList.add('active');
    } else if (i === (index - 1 + chars.length) % chars.length || i === (index + 2 + chars.length) % chars.length || i === (index + 3 + chars.length) % chars.length) {
      el.classList.add('left');
    } else if (i === (index + 1) % chars.length) {
      el.classList.add('exit-up');
    } else {
      el.style.opacity = 0;
    }
  });
}


function updatePositionss() {
  charrs.forEach((el, i) => {
    el.classList.remove('active', 'left', 'right','farright');
    if (i === indexs) {
      console.log(indexs);
      el.classList.add('active');
    } else if (i === (indexs - 1 + charrs.length) % charrs.length) {
      el.classList.add('left');
    } else if (i === (indexs + 1) % charrs.length) {
      el.classList.add('right');
    }
    else if (i === (indexs + 2)% charrs.length || i === (indexs + 3)% charrs.length ){
      el.classList.add('farright')
    }
     else {
      el.style.opacity = 0;
    }
  });
}


window.addEventListener('wheel', e => {
  if (busy) return;
  busy = true;
  const direction = Math.sign(e.deltaY);
  if (direction === 0) return;

  const next = (index + direction + chars.length) % chars.length; //should probably figure out why it uses chars.length idk mrgpt said so soooooooooooo yoink
  const nexts = (indexs + direction + charrs.length) % charrs.length;
  index = next;
  indexs = nexts;
  updatePositions();
  updatePositionss();

  setTimeout(() => busy = false, 500);
});

window.addEventListener('keydown', e => {
  if (busy) return;
  busy = true;
  if (e.key === 'ArrowRight') indexs = Math.min(indexs + 1, charrs.length - 1);
  if (e.key === 'ArrowLeft') indexs = Math.max(indexs - 1, 0);
  if (e.key === 'ArrowRight') index = Math.min(index + 1, chars.length - 1);
  if (e.key === 'ArrowLeft') index = Math.max(index - 1, 0);
  updatePositions();
  updatePositionss();
  setTimeout(() => busy = false, 500);
});

window.addEventListener('touchstart', (e) => {
  startX = e.touches[0].clientX;
});

window.addEventListener('touchend', (e) => {
  if (busy) return;
  busy = true;
 endX = e.changedTouches[0].clientX;
  const diff = endX - startX;

  if (Math.abs(diff) > threshold) {
    if (diff > 0) {
      console.log('Swipe Right');
      const next = (indexs + -1 + charrs.length) % charrs.length;
      indexs = next;
      updatePositions();
      setTimeout(() => busy = false, 500);
    } else {
      console.log('Swipe Left');
      const next = (indexs + 1 + charrs.length) % charrs.length;
      indexs = next;
      updatePositions();
      setTimeout(() => busy = false, 500);
    }
  }
});

//startup processussusus
updatePositions();
updatePositionss();

</script>
<script>
  function dothe() {    
    
    const percentageText = document.getElementById("percentage").innerText;
    const percentageValue = parseInt(percentageText);
    document.getElementById("progress-circle").style.setProperty('--percentage', `${percentageValue}%`);
    document.getElementById("progress-circle").id = "modified";
    document.getElementById("percentage").id = "modified";
    
}
let counter = 0;
const items = 20;
while (counter < items) {
    dothe();
    counter++;
}
</script>
</body>
</html>
